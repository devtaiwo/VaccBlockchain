apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: eth-ethstats
  namespace: the-project 
  labels:
    app: eth-ethstats
  annotations:
    #kubernetes.io/ingress.class: traefik
    #traefik.ingress.kubernetes.io/auth-type: "basic"
    #traefik.ingress.kubernetes.io/auth-secret: "mysecret"
spec:
  rules:
  - host: eth-ethstats-the-project.consul.vmware.nayatronix.com 
    http:
      paths:
      - backend:
          serviceName: eth-stats
          servicePort:  80 
        path: /
  tls:
   - hosts:
     - eth-ethstats-the-project.consul.vmware.nayatronix.com
     secretName: eth-ethstats-the-project.consul.vmware.nayatronix.com



---



# Define certificate
apiVersion: cert-manager.io/v1alpha2
kind: Certificate
metadata:
  name: eth-ethstats-the-project.consul.vmware.nayatronix.com 
  namespace: the-project
spec:
  secretName: eth-ethstats-the-project.consul.vmware.nayatronix.com 
  issuerRef:
    name: vault-clusterissuer
    kind: ClusterIssuer
  commonName: eth-ethstats-the-project.consul.vmware.nayatronix.com
  dnsNames:
  - eth-ethstats-the-project.consul.vmware.nayatronix.com

